import{p as e,a as t,b as a,r as n,o as s,c as o,d as r,w as l,v as u,t as c,F as d,e as i,f,g as p,h,L as m,T as y,i as g,I as _,B as b,R as j,C as w,P as v,j as x,S as C}from"./vendor.0cd4d254.js";function k(e){const t={p:[],m:[],s:[],z:[]};let a=e;for(;a.length>0;){const e=a.match(/[0-9]*[spzm]/),n=e[0];t[n[n.length-1]]=t[n[n.length-1]].concat(n.substr(0,n.length-1).split("")),a=a.substr(0,e.index)+a.substr(e.index+n.length)}return t}!function(e=".",t="__import__"){try{self[t]=new Function("u","return import(u)")}catch(a){const n=new URL(e,location),s=e=>{URL.revokeObjectURL(e.src),e.remove()};self[t]=e=>new Promise(((a,o)=>{const r=new URL(e,n);if(self[t].moduleMap[r])return a(self[t].moduleMap[r]);const l=new Blob([`import * as m from '${r}';`,`${t}.moduleMap['${r}']=m;`],{type:"text/javascript"}),u=Object.assign(document.createElement("script"),{type:"module",src:URL.createObjectURL(l),onerror(){o(new Error(`Failed to import: ${e}`)),s(u)},onload(){a(self[t].moduleMap[r]),s(u)}});document.head.appendChild(u)})),self[t].moduleMap={}}}("/mahjong/assets/");const M={m:["🀇","🀈","🀉","🀊","🀋","🀌","🀍","🀎","🀏"],p:["🀙","🀚","🀛","🀜","🀝","🀞","🀟","🀠","🀡"],s:["🀐","🀑","🀒","🀓","🀔","🀕","🀖","🀗","🀘"],z:["🀀","🀁","🀂","🀃","🀆","🀅","🀄","🀫","🀪"]};function R(e){let t=9,a=0,n=0,s=0;const o=(e,t=!1)=>{let o=[0,0,0],r=[0,0,0];const l=[...e];let u=0,c=0,d=0;for(let a=0;a<9;a++)if(0!==l[a]&&void 0!==l[a]&&(l[a]>=3&&(l[a]-=3,u++),l[a]>0)){if(t)continue;l[a+1]>0&&l[a+2]>0&&(l[a]--,l[a+1]--,l[a+2]--,u++),l[a]>0&&l[a+1]>0&&l[a+2]>0&&(l[a]--,l[a+1]--,l[a+2]--,u++)}for(let a=0;a<9;a++)0!==l[a]&&void 0!==l[a]&&(2!==l[a]?t||(l[a+1]>0&&(l[a]--,l[a+1]--,c++),l[a+2]>0&&(l[a]--,l[a+2]--,c++)):(l[a]-=2,c++));d+=l.reduce(((e,t)=>e+t)),o=[u,c,d];const i=[...e];u=0,c=0,d=0;for(let a=0;a<9;a++)0!==i[a]&&void 0!==i[a]&&(t||(i[a]>=2&&i[a+1]>=2&&i[a+2]>=2&&(i[a]-=2,i[a+1]-=2,i[a+2]-=2,u+=2),i[a]>=2&&i[a+1]>=2&&i[a+2]>=2&&(i[a]-=2,i[a+1]-=2,i[a+2]-=2,u+=2)),3!==i[a]&&4!==i[a]||(i[a]-=3,u++),2===i[a]&&(i[a]-=2,c++),t||(i[a]>0&&i[a+1]>0&&i[a+2]>0&&(i[a]--,i[a+1]--,i[a+2]--,u++),i[a]>0&&i[a+1]>0&&(i[a]--,i[a+1]--,c++),i[a]>0&&i[a+2]>0&&(i[a]--,i[a+2]--,c++)));d+=i.reduce(((e,t)=>e+t)),r=[u,c,d];const f=o>=r?o:r;a+=f[0],n+=f[1],s+=f[2]};return o(e[0]),o(e[1]),o(e[2]),o(e[3],!0),(()=>{let e=-1;for(;a<4;)n&&s?(n--,s--,a++,e++):!n||s?!n&&s&&(s-=2,a++,e+=2):(n--,s++,a++,e++);s>0&&e++,t=e<t?e:t,a=n=s=0})(),t}function z(e){const t=function(e){const t=e[0].reduce(((e,t)=>e+t))+e[1].reduce(((e,t)=>e+t))+e[2].reduce(((e,t)=>e+t))+e[3].reduce(((e,t)=>e+t));if(t<13||t>14)return-2;const a=[...e[0],...e[1],...e[2],...e[3]];let n=0,s=0;for(let o=0;o<34;o++)a[o]>=2&&n++,1===a[o]&&s++;return n+s>=7?6-n:6-n+(7-n-s)}(e),a=function(e){const t=e[0].reduce(((e,t)=>e+t))+e[1].reduce(((e,t)=>e+t))+e[2].reduce(((e,t)=>e+t))+e[3].reduce(((e,t)=>e+t));if(t<13||t>14)return-2;const a=[e[0][0],e[0][8],e[1][0],e[1][8],e[2][0],e[2][8],...e[3]];let n=0,s=0;for(let o=0;o<13;o++)a[o]&&n++,a[o]>1&&(s=1);return 13-n-s}(e);return-2===t||-2===a?R(e):Math.min(R(e),t,a)}function I(e,t,a){const n=z(e);e[t][a]--;const s=[];for(let o=0;o<4;o++)for(let r=0;r<e[o].length;r++){e[o][r]++;const l=z(e);if(o!==t&&r!==a&&l<n){const e={i:o,j:r};s.push(e)}e[o][r]--}return e[t][a]++,s}function S(e){const t=function(e){const t=new Array(9).fill(0),a=new Array(9).fill(0),n=new Array(9).fill(0),s=new Array(7).fill(0);let o;for(let r=0;r<e.m.length;r++)o=parseInt(e.m[r]),t[--o]++;for(let r=0;r<e.p.length;r++)o=parseInt(e.p[r]),a[--o]++;for(let r=0;r<e.s.length;r++)o=parseInt(e.s[r]),n[--o]++;for(let r=0;r<e.z.length;r++)o=parseInt(e.z[r]),s[--o]++;return[[...t],[...a],[...n],[...s]]}(k(e)),a=z(t),n=function(e){const t=[];for(let a=0;a<4;a++)for(let n=0;n<e[a].length;n++)e[a][n]>0&&t.push(I(e,a,n));return t}(t);return{syanten:a,kariyou:function(e,t){const a=new Map,n=$(e);let s=[];for(let o=0;o<t.length;o++)t[o].length>0&&(s=$(t[o]),a.set(n[o],s));return a}(function(e){const t=[];for(let a=0;a<4;a++)for(let n=0;n<e[a].length;n++)if(e[a][n]>0){const e={i:a,j:n};t.push(e)}return t}(t),n)}}function $(e){const t=[];let a="";for(let n=0;n<e.length;n++)0===e[n].i&&(a=++e[n].j+"m",t.push(a)),1===e[n].i&&(a=++e[n].j+"p",t.push(a)),2===e[n].i&&(a=++e[n].j+"s",t.push(a)),3===e[n].i&&(a=++e[n].j+"z",t.push(a));return t}function L(e){try{const t=k(e.replace(/0/,"5")),a=[];for(const e in t)a.push(...t[e].map((t=>M[e][t-1])));return a}catch(t){return[]}}const U={data:()=>({handCards:"",Syanten:0,calcRes:[],inputed:!1}),methods:{showCards(){if(this.handCards.length<=0)return void a.error("手牌不能为空");const{syanten:e,kariyou:t}=S(this.handCards);this.Syanten=e;const n=[];t.forEach(((e,t)=>{n.push({da:L(t)[0],mo:e.map(L).map((e=>e[0]))})})),this.calcRes=n,this.inputed=!0},discard(e,t){console.log(`摸${e.mo[t]}打${e.da},index is ${t}`)}},computed:{handCardsImg(){return L(this.handCards)}}},A=f("data-v-9a7c7ab2");e("data-v-9a7c7ab2");const P=p(" - m=萬子, p=筒子, s=索子, z=字牌, 0=赤 - 一般形=４面子１雀頭 / 標準形=一般形＋七対形＋国士形 - ツモはその時点で使用していない牌をランダムに選択します - 有効牌をクリックすると打牌後にその牌をツモ牌として表示します - (n*3+2)枚で開始：(n*3+2)枚目をツモ牌として表示 - (n*3+1)枚で開始：ツモはページのロード時に毎回変化 - 和了役の判定はありません - 暗槓はできません "),B=p("新規");t();const E=A(((e,t,a,f,p,h)=>{const m=n("a-button"),y=n("a-tooltip"),g=n("a-input-search"),_=n("a-form-item"),b=n("a-form"),j=n("a-col"),w=n("a-row"),v=n("a-table-column"),x=n("a-table-column-group"),C=n("a-table");return s(),o(w,{type:"flex",justify:"center"},{default:A((()=>[r(j,{span:24},{default:A((()=>[r(j,{span:24},{default:A((()=>[r(w,{type:"flex",justify:"center"},{default:A((()=>[r(j,{span:12},{default:A((()=>[r(b,null,{default:A((()=>[r(_,{label:"Please input your hand cards:"},{default:A((()=>[r(g,{value:p.handCards,"onUpdate:value":t[1]||(t[1]=e=>p.handCards=e),placeholder:"手牌",size:"large",onSearch:h.showCards},{enterButton:A((()=>[r(y,null,{title:A((()=>[P])),default:A((()=>[r(m,{type:"link",ghost:""},{default:A((()=>[B])),_:1})])),_:1})])),_:1},8,["value","onSearch"])])),_:1})])),_:1})])),_:1})])),_:1})])),_:1}),r(j,{span:24},{default:A((()=>[r(w,{type:"flex",justify:"center"},{default:A((()=>[r(j,{span:12},{default:A((()=>[l(r(C,{"data-source":p.calcRes,rowKey:(e,t)=>t,bordered:"",style:{width:"100%"},pagination:{pageSize:50},scroll:{y:240}},{title:A((()=>[r("span",null,"手牌："+c(h.handCardsImg.join(""))+"("+c(0===p.Syanten?"聴牌":`${p.Syanten}向聴`)+")",1)])),default:A((()=>[r(x,{title:"標準形(七対国士を含む)の計算結果:"},{default:A((()=>[r(v,{key:"da","data-index":"da",title:"打"}),r(v,{key:"mo",title:"摸","data-index":"mo"},{default:A((({text:e,record:t})=>[r("a",null,[(s(!0),o(d,null,i(e,((e,a)=>(s(),o("span",{key:e,onClick:e=>h.discard(t,a)},c(e),9,["onClick"])))),128))])])),_:1})])),_:1})])),_:1},8,["data-source","rowKey"]),[[u,p.inputed]])])),_:1})])),_:1})])),_:1})])),_:1})])),_:1})}));U.render=E,U.__scopeId="data-v-9a7c7ab2";const F={name:"App",components:{Home:U}},O=f("data-v-cc4b0da2");e("data-v-cc4b0da2");const H={class:"layout"},K=r("div",{class:"imgBox"},[r("img",{alt:"Mahjong pic",src:"/mahjong/assets/majhong.953649db.png",style:{transform:"scale(0.7)"}})],-1),T=p(" Pixy ©2021 ");t();const W=O(((e,t,a,l,u,c)=>{const d=n("a-page-header"),i=n("a-layout-header"),f=n("a-col"),p=n("a-row"),h=n("Home"),m=n("a-layout-content"),y=n("a-layout-footer"),g=n("a-layout");return s(),o("div",H,[r(g,null,{default:O((()=>[r(i,{style:{padding:"0"},class:"header"},{default:O((()=>[r(d,{style:{"background-color":"#f5f5f5",width:"100%"},title:"Mahjong helper","sub-title":"Welcome to Pixy Mahjong website"})])),_:1}),r(m,{class:"content"},{default:O((()=>[r(p,null,{default:O((()=>[r(f,{span:24},{default:O((()=>[r(p,{type:"flex",justify:"center"},{default:O((()=>[r(f,{span:24},{default:O((()=>[K])),_:1})])),_:1}),r(p,{type:"flex",justify:"center"},{default:O((()=>[r(f,{span:24},{default:O((()=>[r(h)])),_:1})])),_:1})])),_:1})])),_:1})])),_:1}),r(y,{style:{"text-align":"center"},class:"footer"},{default:O((()=>[T])),_:1})])),_:1})])}));F.render=W,F.__scopeId="data-v-cc4b0da2",h(F).use(m).use(y).use(g).use(_).use(b).use(j).use(w).use(v).use(x).use(C).mount("#app");
